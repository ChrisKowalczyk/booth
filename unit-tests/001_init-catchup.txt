# vim: ft=sh et :


ticket:
    state               ST_INIT
    last_ack_ballot     1
    new_ballot          2012

# No message0
# expecting catchup query

# outgoing packet: expect this data
outgoing0:
    header.cmd          CMD_CATCHUP
    header.result       RLT_SUCCESS


# should be accepted
message2:               # valid CMR_CATCHUP
    header.cmd          CMR_CATCHUP
    header.result       RLT_SUCCESS
    header.from         booth_conf->site[2].site_id
    ticket.ballot       2062
    ticket.prev_ballot  2052
    ticket.owner        -1

# nothing goes out


# after a delay, check final state
finally:
# should be overwritten
    last_ack_ballot     2052
    new_ballot          2062
