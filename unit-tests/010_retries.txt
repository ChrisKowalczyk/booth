# vim: ft=sh et :
#
# Testing whether retries are sent, and if they're stopped again.


ticket:
    state               ST_STABLE
    last_ack_ballot     40
    new_ballot          50
    owner               local
    retries             6
    timeout             1
    # may keep ticket all the time
    expiry              3000
    # but shall start renewal now
    expires             time(0) + 1000



outgoing0:
    header.cmd          OP_PREPARING
outgoing1:
    header.cmd          OP_PREPARING
outgoing2:
    header.cmd          OP_PREPARING
outgoing3:
    header.cmd          OP_PREPARING

message4:
    header.cmd          OP_PROMISING
    header.from         booth_conf->site[2].site_id
    header.result       0
    ticket.prev_ballot  45
    ticket.ballot       booth_conf->ticket[0].new_ballot

outgoing5:
    header.cmd          OP_PROPOSING
outgoing6:
    header.cmd          OP_PROPOSING
outgoing7:
    header.cmd          OP_PROPOSING
outgoing8:
    header.cmd          OP_PROPOSING
outgoing9:
    header.cmd          OP_PROPOSING
outgoing10:
    header.cmd          OP_PROPOSING
    

# Now retry counter should trigger, and restart paxos
outgoing11:
    header.cmd          OP_PREPARING
